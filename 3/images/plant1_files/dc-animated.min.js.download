var AdRollAnimatedAd=AdRollAnimatedAd||{};AdRollAnimatedAd.createJS=createjs;AdRollAnimatedAd.flashLib={};AdRollAnimatedAd.flashImgs={};window.onload=function(){return AdRollAnimatedAd.app.init()};(function(){var logic=AdRollAnimatedAd;var canvas,stage,exportRoot,images,video;function isMobile(){return(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/Silk/i)||navigator.userAgent.match(/Mobile Safari/i)||navigator.userAgent.match(/IEMobile/i))!=null}function init(){canvas=document.getElementById("adrollCanvas");images=logic.flashImgs||{};var loader=new logic.createJS.LoadQueue(false);loader.addEventListener("fileload",handleFileLoad);loader.addEventListener("complete",handleComplete);loader.loadManifest(logic.flashLib.properties.manifest)}function handleFileLoad(evt){if(evt.item.type=="image"){images[evt.item.id]=evt.result}}function handleComplete(evt){exportRoot=new logic.flashLib.animation;stage=new logic.createJS.Stage(canvas);stage.cursor="pointer";stage.enableMouseOver(10);stage.addChild(exportRoot);stage.update();logic.createJS.Ticker.fps=lib.properties.fps;logic.createJS.Ticker.addEventListener("tick",stage);video={};timelineDiscovery()}function timelineDiscovery(){if(exportRoot["videoPlayer"]!==undefined&&exportRoot["video"]!==undefined&&isMobile()==false){video=exportRoot["videoPlayer"];var advDiv=document.getElementById("adrollCanvas").parentElement;var videoDiv=document.createElement("div");var videoElm=document.createElement("video");advDiv.appendChild(videoDiv).appendChild(videoElm);videoDiv.setAttribute("id","adrollVideo");if(!video["useDOM"])videoDiv.setAttribute("style","display:none;");videoElm.setAttribute("id","adrollPlayer");var videoSrc=document.createElement("source");var source=video["url"];if(source.indexOf(".webm")==-1&&source.indexOf(".mp4")==-1){videoSrc.setAttribute("src",source+".webm");videoElm.appendChild(videoSrc);videoSrc=document.createElement("source");source+=".mp4"}videoSrc.setAttribute("src",source);videoElm.appendChild(videoSrc);var stub=exportRoot["video"];videoElm.setAttribute("width",stub.__proto__.nominalBounds.width);videoElm.setAttribute("height",stub.__proto__.nominalBounds.height);videoElm.setAttribute("muted","true");videoElm.setAttribute("controls","false");if(video["loop"])videoElm.setAttribute("loop","true");videoElm.width=stub.__proto__.nominalBounds.width;videoElm.height=stub.__proto__.nominalBounds.height;videoElm.muted=true;videoElm.controls=false;videoElm.hidden=true;if(video["useDOM"]){videoElm.style.height=stub.__proto__.nominalBounds.height+"px";videoElm.style.width=stub.__proto__.nominalBounds.width+"px";videoElm.style.position="absolute";videoElm.style.top=videoElm.style.left="0";videoElm.style.pointerEvents="none"}}if(exportRoot["countdownTimer"]!==undefined){var root=exportRoot;var params=exportRoot["countdownTimer"];var clock=typeof params["object"]=="string"?eval(params["object"]):params["object"];if(!clock)return;var endtime=params["end_time"];if(!endtime){clock.visible=false;return}var end=new Date(endtime);var timer=setInterval(timeBetweenDates,1e3);function timeBetweenDates(){var now=new Date;var difference=end.getTime()-now.getTime();if(difference<=0){clearInterval(timer);if(params["complete"]){params["complete"]()}else{clock.visible=false}}else{var currentTime={seconds:Math.floor(difference/1e3)};currentTime.minutes=Math.floor(currentTime.seconds/60);currentTime.hours=Math.floor(currentTime.minutes/60);currentTime.days=Math.floor(currentTime.hours/24);currentTime.hours%=24;currentTime.minutes%=60;currentTime.seconds%=60;var showTimes=function(t){var display=currentTime[t]+"";if(params["two_digits"]==true&&currentTime[t]<10){display="0"+display}if(clock.getChildByName(t)){clock[t].text=display}};["days","hours","minutes","seconds"].forEach(showTimes)}}}}return AdRollAnimatedAd.app={init:function(){init()},startVideo:function(){if(isMobile()==true){exportRoot["video"].visible=false;exportRoot.play();return}var element=document.getElementById("adrollPlayer");if(!element)return;var stub=exportRoot["video"];var player;if(video["useDOM"]){player=new logic.createJS.DOMElement(element);player.x=player.y=0;player.mouseEnabled=false}else{player=new logic.createJS.Bitmap(element)}stub.addChild(player);stage.update();element.onended=function(){exportRoot.dispatchEvent(new logic.createJS.Event("onVideoComplete"))};element.hidden=false;element.play();setTimeout(AdRollAnimatedAd.app.stopVideo,30*1e3)},stopVideo:function(){var element=document.getElementById("adrollPlayer");if(!element||element.ended)return;element.pause();exportRoot.dispatchEvent(new logic.createJS.Event("onVideoComplete"))}}})();